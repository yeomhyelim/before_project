-- 테이블 생성 --

CREATE TABLE `POST_MAIL_LOG` (
  `PL_NO` BIGINT NOT NULL AUTO_INCREMENT COMMENT '번호',
  `PL_PM_NO` BIGINT COMMENT '전체메일발송관리 번호',
  `PL_TO_M_NO` BIGINT COMMENT '받는사람 회원번호',
  `PL_TO_M_MAIL` VARCHAR(30) COMMENT '받는사람 이메일',
  `PL_TO_M_NAME` VARCHAR(60) COMMENT '받는사람 이름',
  `PL_FROM_M_NO` BIGINT COMMENT '보낸사람 회원번호',
  `PL_FROM_M_MAIL` VARCHAR(30) COMMENT '보낸사람 이메일',
  `PL_FROM_M_NAME` VARCHAR(60) COMMENT '보낸사람 이름',
  `PL_IP` VARCHAR(20) COMMENT '보낸사람 아이피',
  `PL_SEND_DATE` DATETIME COMMENT '보낸시간',
  `PL_SEND_RESULT` VARCHAR(20) COMMENT '결과',
  `PL_REG_DT` DATETIME COMMENT '작성일',
  `PL_REG_NO` BIGINT COMMENT '작성자',
  PRIMARY KEY(PL_NO)
) ENGINE=MyISAM
COMMENT='전체메일발송관리-로그';

-- 프로시저 --
CREATE PROCEDURE SP_POST_MAIL_LOG_I (
	 IN IN_PL_NO INT
	,IN IN_PL_PM_NO INT
	,IN IN_PL_TO_M_NO INT
	,IN IN_PL_TO_M_MAIL VARCHAR(30)
	,IN IN_PL_TO_M_NAME VARCHAR(60)
	,IN IN_PL_FROM_M_NO INT
	,IN IN_PL_FROM_M_MAIL VARCHAR(30)
	,IN IN_PL_FROM_M_NAME VARCHAR(60)
	,IN IN_PL_IP VARCHAR(20)
	,IN IN_PL_SEND_DATE DATETIME
	,IN IN_PL_SEND_RESULT VARCHAR(20)
	,IN IN_PL_REG_DT DATETIME
	,IN IN_PL_REG_NO INT
)
BEGIN
	INSERT INTO POST_MAIL_LOG (
		 PL_PM_NO
		,PL_TO_M_NO
		,PL_TO_M_MAIL
		,PL_TO_M_NAME
		,PL_FROM_M_NO
		,PL_FROM_M_MAIL
		,PL_FROM_M_NAME
		,PL_IP
		,PL_SEND_DATE
		,PL_SEND_RESULT
		,PL_REG_DT
		,PL_REG_NO
	) VALUES (
		 IN_PL_PM_NO
		,IN_PL_TO_M_NO
		,IN_PL_TO_M_MAIL
		,IN_PL_TO_M_NAME
		,IN_PL_FROM_M_NO
		,IN_PL_FROM_M_MAIL
		,IN_PL_FROM_M_NAME
		,IN_PL_IP
		,NOW()
		,IN_PL_SEND_RESULT
		,NOW()
		,IN_PL_REG_NO
	);
END;


