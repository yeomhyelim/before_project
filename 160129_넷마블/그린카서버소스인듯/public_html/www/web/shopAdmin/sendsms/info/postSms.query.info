-- 테이블 생성 --

CREATE TABLE `POST_SMS` (
  `PS_NO` BIGINT NOT NULL AUTO_INCREMENT COMMENT '번호',
  `PS_TEXT` TEXT COMMENT '내용',
  `PS_TOTAL_CNT` BIGINT COMMENT '발송건수',
  `PS_REG_DT` DATETIME COMMENT '작성일',
  `PS_REG_NO` BIGINT COMMENT '작성자',
  `PS_MOD_DT` DATETIME COMMENT '수정일',
  `PS_MOD_NO` BIGINT COMMENT '수정자',
   PRIMARY KEY(PS_NO)
) ENGINE=MyISAM
COMMENT='전체문자발송관리';


-- 프로시저 --

CREATE PROCEDURE SP_POST_SMS_I (
	 IN IN_PS_NO INT
	,IN IN_PS_TEXT BLOB
	,IN IN_PS_TOTAL_CNT INT
	,IN IN_PS_REG_DT DATETIME
	,IN IN_PS_REG_NO INT
	,IN IN_PS_MOD_DT DATETIME
	,IN IN_PS_MOD_NO INT
)
BEGIN
	INSERT INTO POST_SMS (
		 PS_TEXT
		,PS_TOTAL_CNT
		,PS_REG_DT
		,PS_REG_NO
		,PS_MOD_DT
		,PS_MOD_NO
	) VALUES (
		 IN_PS_TEXT
		,0
		,NOW()
		,IN_PS_REG_NO
		,NOW()
		,IN_PS_MOD_NO
	);
END;

CREATE PROCEDURE SP_POST_SMS_U (
	 IN IN_PS_NO INT
	,IN IN_PS_TEXT BLOB
	,IN IN_PS_TOTAL_CNT INT
	,IN IN_PS_REG_DT DATETIME
	,IN IN_PS_REG_NO INT
	,IN IN_PS_MOD_DT DATETIME
	,IN IN_PS_MOD_NO INT
)
BEGIN
	UPDATE POST_SMS SET 
		 PS_TEXT = IN_PS_TEXT
		,PS_MOD_DT = NOW()
		,PS_MOD_NO = IN_PS_MOD_NO
    WHERE PS_NO = IN_PS_NO;
END;

CREATE PROCEDURE SP_POST_SMS_D (
	IN IN_PS_NO INT
)
BEGIN
	DELETE FROM POST_SMS
    WHERE PS_NO = IN_PS_NO;
END;

